<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ISLR: Bootstrap quiz â€¢ StatisticalLearning</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">StatisticalLearning</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/03-LinearRegression.html">ISLR 3: Linear Regression</a>
    </li>
    <li>
      <a href="../articles/04-Classification.html">ISLR 4: Classification</a>
    </li>
    <li>
      <a href="../articles/05-CV-Resampling-Methods.html">ISLR 5: Resampling Methods</a>
    </li>
    <li>
      <a href="../articles/06-Model-Selection.html">ISLR 6: Linear Model Selection and Regularization</a>
    </li>
    <li>
      <a href="../articles/07-Nonlinear.html">Moving Beyond Linearity</a>
    </li>
    <li>
      <a href="../articles/08-Trees.html">Tree-Based Methods</a>
    </li>
    <li>
      <a href="../articles/09-SVM.html">Support Vector Machines</a>
    </li>
    <li>
      <a href="../articles/10-Unsupervised.html">Unsupervised Learning</a>
    </li>
    <li>
      <a href="../articles/quiz-05-CV-Resampling-Methods.html">ISLR: Bootstrap quiz</a>
    </li>
    <li>
      <a href="../articles/quiz-07-Nonlinear-Functions-in-R.html">ISLR: Nonlinear functions quiz</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>ISLR: Bootstrap quiz</h1>
                        <h4 class="author">Justin M Shea</h4>
            
          </div>

    
    
<div class="contents">
<p>Download the file <code>5.R.RData</code> and load it into R using the <code>load</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data_address &lt;-<span class="st"> "https://lagunita.stanford.edu/c4x/HumanitiesSciences/StatLearning/asset/5.R.RData"</span>
<span class="kw">download.file</span>(data_address, <span class="kw">paste0</span>(<span class="kw">getwd</span>(), <span class="st">"/R"</span>))</code></pre></div>
<div id="r-r1" class="section level2">
<h2 class="hasAnchor">
<a href="#r-r1" class="anchor"></a>5.R.R1</h2>
<p>Consider the linear regression model of y on X1 and X2. What is the standard error for <span class="math inline">\(\beta_1\)</span>?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="kw">path.expand</span>(<span class="st">"~/R/StatisticalLearning/data/5R.RData"</span>))

model_<span class="dv">51</span> &lt;-<span class="st"> </span><span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>X1 <span class="op">+</span><span class="st"> </span>X2, <span class="dt">data =</span> Xy)

<span class="kw">summary</span>(model_<span class="dv">51</span>)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = y ~ X1 + X2, data = Xy)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.44171 -0.25468 -0.01736  0.33081  1.45860 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  0.26583    0.01988  13.372  &lt; 2e-16 ***
## X1           0.14533    0.02593   5.604 2.71e-08 ***
## X2           0.31337    0.02923  10.722  &lt; 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.5451 on 997 degrees of freedom
## Multiple R-squared:  0.1171, Adjusted R-squared:  0.1154 
## F-statistic: 66.14 on 2 and 997 DF,  p-value: &lt; 2.2e-16</code></pre>

</div>
<div id="r-r2" class="section level2">
<h2 class="hasAnchor">
<a href="#r-r2" class="anchor"></a>5.R.R2</h2>
<p>Next, plot the data using <code>matplot(Xy, type="l")</code>. Which of the following do you think is most likely given what you see?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">matplot</span>(Xy, <span class="dt">type=</span><span class="st">"l"</span>)</code></pre></div>
<p><img src="quiz-05-CV-Resampling-Methods_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>

</div>
<div id="r-r3" class="section level2">
<h2 class="hasAnchor">
<a href="#r-r3" class="anchor"></a>5.R.R3</h2>
<p>Now, use the (standard) bootstrap to estimate s.e.(<span class="math inline">\(\hat\beta_{1}\)</span>). To within 10%, what do you get?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">beta_hat_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="cf">function</span>(data, index, formula) {
    
    model &lt;-<span class="st"> </span><span class="kw">lm</span>(formula, <span class="dt">data =</span> data[index, ])
    
    <span class="kw">summary</span>(model)<span class="op">$</span>coefficients[<span class="dv">2</span>, <span class="dv">1</span>]
}

<span class="kw">library</span>(boot)
boot_model_<span class="dv">51</span> &lt;-<span class="st"> </span><span class="kw">boot</span>(<span class="dt">data =</span> Xy, <span class="dt">statistic =</span> beta_hat_<span class="dv">1</span>, <span class="dt">R =</span> <span class="dv">15000</span>, <span class="dt">formula =</span> y <span class="op">~</span><span class="st"> </span>
<span class="st">    </span>X1 <span class="op">+</span><span class="st"> </span>X2, <span class="dt">parallel =</span> <span class="st">"snow"</span>, <span class="dt">ncpus =</span> <span class="dv">4</span>)

<span class="kw">boot.ci</span>(boot_model_<span class="dv">51</span>, <span class="dt">conf =</span> <span class="fl">0.9</span>)</code></pre></div>
<pre><code>## BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS
## Based on 15000 bootstrap replicates
## 
## CALL : 
## boot.ci(boot.out = boot_model_51, conf = 0.9)
## 
## Intervals : 
## Level      Normal              Basic         
## 90%   ( 0.0980,  0.1922 )   ( 0.0984,  0.1921 )  
## 
## Level     Percentile            BCa          
## 90%   ( 0.0985,  0.1923 )   ( 0.0991,  0.1928 )  
## Calculations and Intervals on Original Scale</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">boot_model_<span class="dv">51</span></code></pre></div>
<pre><code>## 
## ORDINARY NONPARAMETRIC BOOTSTRAP
## 
## 
## Call:
## boot(data = Xy, statistic = beta_hat_1, R = 15000, formula = y ~ 
##     X1 + X2, parallel = "snow", ncpus = 4)
## 
## 
## Bootstrap Statistics :
##      original       bias    std. error
## t1* 0.1453263 0.0001838754  0.02863299</code></pre>

</div>
<div id="r-r4" class="section level2">
<h2 class="hasAnchor">
<a href="#r-r4" class="anchor"></a>5.R.R4</h2>
<p>Finally, use the block bootstrap to estimate s.e.(<span class="math inline">\(\hat\beta_1\)</span>). Use blocks of 100 contiguous observations, and resample ten whole blocks with replacement then paste them together to construct each bootstrap time series. For example, one of your bootstrap resamples could be:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">block_boot_model_<span class="dv">51</span> &lt;-<span class="st"> </span><span class="kw">tsboot</span>(Xy, beta_hat_<span class="dv">1</span>, <span class="dt">formula =</span> y <span class="op">~</span><span class="st"> </span>X1 <span class="op">+</span><span class="st"> </span>X2, <span class="dt">R =</span> <span class="dv">15000</span>, 
    <span class="dt">sim =</span> <span class="st">"fixed"</span>, <span class="dt">l =</span> <span class="dv">100</span>, <span class="dt">parallel =</span> <span class="st">"snow"</span>, <span class="dt">ncpus =</span> <span class="dv">4</span>)

<span class="kw">boot.ci</span>(block_boot_model_<span class="dv">51</span>, <span class="dt">conf =</span> <span class="fl">0.9</span>)</code></pre></div>
<pre><code>## BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS
## Based on 15000 bootstrap replicates
## 
## CALL : 
## boot.ci(boot.out = block_boot_model_51, conf = 0.9)
## 
## Intervals : 
## Level      Normal              Basic              Percentile     
## 90%   (-0.1759,  0.4693 )   (-0.1673,  0.4707 )   (-0.1800,  0.4580 )  
## Calculations and Intervals on Original Scale</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">block_boot_model_<span class="dv">51</span></code></pre></div>
<pre><code>## 
## BLOCK BOOTSTRAP FOR TIME SERIES
## 
## Fixed Block Length of 100 
## 
## Call:
## tsboot(tseries = Xy, statistic = beta_hat_1, R = 15000, l = 100, 
##     sim = "fixed", formula = y ~ X1 + X2, parallel = "snow", 
##     ncpus = 4)
## 
## 
## Bootstrap Statistics :
##      original       bias    std. error
## t1* 0.1453263 -0.001409248   0.1961311</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#r-r1">5.R.R1</a></li>
      <li><a href="#r-r2">5.R.R2</a></li>
      <li><a href="#r-r3">5.R.R3</a></li>
      <li><a href="#r-r4">5.R.R4</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Justin M. Shea.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
